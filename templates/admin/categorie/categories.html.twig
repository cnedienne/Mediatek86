{% extends "baseadmin.html.twig" %}
{% block title %}Categories
{% endblock %}
{% block body %}
	<div class="row mt-3">
		<div class="col">
			<h2>
				gestion des categories
			</h2>
			<div class="card mb-4">
				<div class="card-body">
					<h5 class="card-title">Ajouter une catégorie</h5>
					<form class="form-inline" action="{{ path('admin.categories.add') }}" method="post">
						<div class="input-group">
							<input type="text" class="form-control" name="name" placeholder="nom de la catégorie">
							<button type="submit" class="btn btn-primary">ajouter</button>
						</div>
					</form>
				</div>
			</div>
			<table class="table table-striped">
				<thead>
					<tr>
						<th>nom</th>
						<th>nombre de formations</th>
						<th>actions</th>
					</tr>
				</thead>
				<tbody>
					{% for categorie in categories %}
						<tr>
							<td>{{ categorie.name }}</td>
							<td>{{ categorie.formations|length }}</td>
							<td>
								<a href="{{ path('admin.categories.delete', {id: categorie.id}) }}" class="btn btn-danger {{ categorie.formations|length > 0 ? 'disabled' : '' }}" onclick="return confirm('Êtes-vous sûr de vouloir supprimer cette catégorie ?')" title="{{ categorie.formations|length > 0 ? 'Cette catégorie est utilisée par des formations' : 'Supprimer cette catégorie' }}">
									Supprimer
								</a>
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>

{% endblock %}
